package com.codenjoy.dojo.japanese.model.portable;

import com.codenjoy.dojo.japanese.model.level.LevelImpl;
import org.junit.Test;

import java.io.File;
import java.util.Arrays;
import java.util.List;

import static java.util.stream.Collectors.toList;
import static org.junit.Assert.*;

public class SolverTest {

    @Test
    public void case1() {
        assertS("-**---**-\n" +
                "****-****\n" +
                "*********\n" +
                "*********\n" +
                "*********\n" +
                "-*******-\n" +
                "--*****--\n" +
                "---***---\n" +
                "----*----",

                "           \n" +
                "  467777764\n" +
                "22---------\n" +
                "44---------\n" +
                " 9---------\n" +
                " 9---------\n" +
                " 9---------\n" +
                " 7---------\n" +
                " 5---------\n" +
                " 3---------\n" +
                " 1---------\n",

                "           \n" +
                "  467777764\n" +
                "22---------\n" +
                "44****-****\n" +
                " 9*********\n" +
                " 9*********\n" +
                " 9*********\n" +
                " 7--*****--\n" +
                " 5----*----\n" +
                " 3---------\n" +
                " 1---------\n");
    }

    @Test
    public void case2() {
        assertS("---------\n" +
                "---------\n" +
                "*********\n" +
                "*---*---*\n" +
                "**-***-**\n" +
                "--*****--\n" +
                "--*---*--\n" +
                "--*****--\n" +
                "---------",

                "      1 1   \n" +
                "    1124211 \n" +
                "   313111313\n" +
                " 11---------\n" +
                "112---------\n" +
                "313---------\n" +
                "  9---------\n" +
                "111---------\n" +
                "232---------\n" +
                "  5---------\n" +
                " 11---------\n" +
                "  5---------\n",

                "      1 1   \n" +
                "    1124211 \n" +
                "   313111313\n" +
                " 11---------\n" +
                "112---------\n" +
                "313---------\n" +
                "  9---------\n" +
                "111---------\n" +
                "232---------\n" +
                "  5---------\n" +
                " 11---------\n" +
                "  5---------\n");
    }

    @Test
    public void case4() {
        Solver solver = new Solver();
        solver.tryAssumption = true; // не будем гадать, пробуем решить точно

        String folder = "src\\main\\resources\\data\\banzai\\";
        List<File> files = Arrays.asList(new File(folder).listFiles()).stream()
                .filter(file -> file.getName().endsWith(".jap"))
                .filter(file -> !file.getName().endsWith("П.jap"))
                .collect(toList());

        List<String> boards = files.stream()
                .map(file -> process(solver, file))
                .collect(toList());

        assertEquals("[1.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "------***-----------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "-----------*--------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------****--------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 10.jap\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "------------*----------------------\n" +
                "------------*----------------------\n" +
                "------------*----------------------\n" +
                "------------**---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-------------*---------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 11.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "-*------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "---------****-------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 12.jap\n" +
                "--------*****-------\n" +
                "--------------------\n" +
                "-*------------------\n" +
                "-*------------------\n" +
                "-*------------------\n" +
                "-**-----------------\n" +
                "-***----------------\n" +
                "-***----------------\n" +
                "-***----------------\n" +
                "-**-----------------\n" +
                "--*-----------------\n" +
                "--*--**-------------\n" +
                "-------***----------\n" +
                "-------***----------\n" +
                "------*****---------\n" +
                "------********------\n" +
                "-------******-------\n" +
                "--------****--------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 13.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                " 8a            111111 2                 \n" +
                " 21 44        111111171     4   6       \n" +
                " 11a44aa862 11184336421 8  44aa822      \n" +
                "611111112a6bahc3112135665aa42223111111  \n" +
                "a1111111353211111111111j1bbh1111111111g1\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "-------***--------****--------***-------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "---------------*********----------------\n" +
                "----------------------------------------\n" +
                "------------**-------------*------------\n" +
                "-----------------------******-----------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "-------------*--------------------------\n" +
                "\n" +
                "\n" +
                ", 14.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                        31   3          \n" +
                "    1            6531   bb  3233 333    \n" +
                "123252334      561327a2311fo1453335433  \n" +
                "433328776a9aaab3444856gi2231c76542259638\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "---------------*****--------------------\n" +
                "---------***********--------------------\n" +
                "-----------*****------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "------------------*---------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 15.jap\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 16.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                         11             \n" +
                "               1 1111 1 111             \n" +
                "         1111111122111111561            \n" +
                "      1111111112524461c1e648732212 2    \n" +
                "311111111111134333332d3f1412222222l21111\n" +
                "-----------------******-----------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------*-----\n" +
                "----------------------------------*-----\n" +
                "----------------------------------*-----\n" +
                "----------------------------------*-----\n" +
                "----------------------------------*-----\n" +
                "----------------------*-*---------*-----\n" +
                "----------------------***---------*-----\n" +
                "----------------------***---------*-----\n" +
                "---------------------****---------*-----\n" +
                "---------------------****---------*-----\n" +
                "---------------------*-**---------*-----\n" +
                "-----------------------**---------*-----\n" +
                "-----------------------*----------*-----\n" +
                "----------------------------------*-----\n" +
                "----------------------------------*-----\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 17.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "----------*---------\n" +
                "---------*----------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "----------*---------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 18.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "              3                         \n" +
                "             74           bb            \n" +
                "            813a2       2a31bc          \n" +
                "        33b9521351     1321352e65       \n" +
                "123444444a521226333434333522125a65456421\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "---------------*------------------------\n" +
                "---------------*----------**--*---------\n" +
                "---------------*---------****-*---------\n" +
                "--------------------------*****---------\n" +
                "-----------------------------**---------\n" +
                "------------------------------*---------\n" +
                "------------------------------*---------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 1M.jap\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "*----------------------------------\n" +
                "*----------------------------------\n" +
                "*----------------------------------\n" +
                "*----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "------------*******----------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-------*****************-----------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 2.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "              11                        \n" +
                "              98                        \n" +
                "           44e11321          11         \n" +
                "           21222111         711111 11   \n" +
                " 221     a8124121113 3222  34447771117  \n" +
                "611133agg2243241211151121322222666644321\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "-- -------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 25.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "- ------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 26.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--*-----------------\n" +
                "--*-----------------\n" +
                "--*-----------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 27.jap\n" +
                "                                   \n" +
                "                                   \n" +
                "           22                      \n" +
                "      1222226                      \n" +
                "   1121222284  22   1    2         \n" +
                "  21123411634642222222222122222222 \n" +
                "21115565b98219864222122133214311124\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------*-----------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "--------*--------------------------\n" +
                "--------*--------------------------\n" +
                "-----------------------------------\n" +
                "----------*------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 28.jap\n" +
                "-----**********-----\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 29.jap\n" +
                "--------------------\n" +
                "-----*--------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 3.jap\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------****--------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "----------****---------\n" +
                "--------******---------\n" +
                "-----------------------\n" +
                "-------------****------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "-----------------------\n" +
                "\n" +
                "\n" +
                ", 30.jap\n" +
                "                                   \n" +
                "                                   \n" +
                "                                   \n" +
                "           3                       \n" +
                "      73123331            33 33    \n" +
                "     6221111221           75957    \n" +
                "6539d622111122621121211169134319611\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 31.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "    2  2                          222   \n" +
                " 2 2123322          42225        243522 \n" +
                " 12313238633333234443121232222232249352 \n" +
                "5422232122222444556611211322642121113217\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 4.jap\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-------******----------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "***********************************\n" +
                "--***------**********************--\n" +
                "------------******************-----\n" +
                "---------------------*****---------\n" +
                "----------------------**-----------\n" +
                "----------------------**-----------\n" +
                "----------------------**-----------\n" +
                "----------------------*------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "----------------***----------------\n" +
                "\n" +
                "\n" +
                ", 5.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                " -------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 6.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                " 11   1  1      1          212 11       \n" +
                " 31 2 31111111 132111  111426b1f111     \n" +
                "132121432828211733353313221512f3212e1111\n" +
                "748ddkabb278hed6222223312345432123432123\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "-----*----------------------------------\n" +
                "-----*----------------------------------\n" +
                "-----*----------------------------------\n" +
                "-----*------*---------------------------\n" +
                "-----*------*---------------------------\n" +
                "-----*------*---------------------------\n" +
                "-----*------*---------------------------\n" +
                "----**------*---------------------------\n" +
                "----**------*--***----------------------\n" +
                "----**------*********-------------------\n" +
                "----***-----*---------------------------\n" +
                "-----**-----*---------------------------\n" +
                "-----**-----*---------------------------\n" +
                "-----*------*---------------------------\n" +
                "----------------------------------------\n" +
                "-----------------------*******----------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 7.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                 1   1                  \n" +
                "              3221   1223               \n" +
                "             4113135313114              \n" +
                "             1112121212111              \n" +
                "  2222    bbb3211111111134def 222222321 \n" +
                "52689adcde2222222321223334322hddcbba8531\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "--------*******---------********--------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "-----------------*********--------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 8.jap\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "------------------------*----------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 9.jap\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "-----------*****--------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "------------------------------\n" +
                "\n" +
                "\n" +
                "]", boards.toString());
    }

    @Test
    public void case3() {
        Solver solver = new Solver();
        solver.tryAssumption = true; // не будем гадать, пробуем решить точно

        String folder = "src\\main\\resources\\data\\jak\\";
        List<File> files = Arrays.asList(new File(folder).listFiles()).stream()
                .filter(file -> file.getName().endsWith(".jap"))
                .filter(file -> !file.getName().endsWith("П.jap"))
                .collect(toList());

        List<String> boards = files.stream()
                .map(file -> process(solver, file))
                .collect(toList());

        assertEquals("[1.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "---*----------------\n" +
                "---*----------------\n" +
                "---*----------------\n" +
                "---*----------------\n" +
                "---*----------------\n" +
                "---*----------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "---------**---------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 10.jap\n" +
                "---------------------\n" +
                "---------------------\n" +
                "---------------------\n" +
                "-----**-------**-----\n" +
                "----***--------**----\n" +
                "**-****-**-***-***-**\n" +
                "*-****-***-****-***-*\n" +
                "*-***-****-*****-**-*\n" +
                "-------**---**-------\n" +
                "---------------------\n" +
                "----------*----------\n" +
                "----*---*****---*----\n" +
                "----*---*****---*----\n" +
                "*-***-****-****-***-*\n" +
                "-**----**--***----**-\n" +
                "---------------------\n" +
                "---------------------\n" +
                "---------------------\n" +
                "---------------------\n" +
                "---------------------\n" +
                "---------------------\n" +
                "\n" +
                "\n" +
                ", 19.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------**----------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 2.jap\n" +
                "------****----------\n" +
                "------****----------\n" +
                "----************----\n" +
                "-****--************-\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "---------**---------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 3.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "            11111 11                    \n" +
                "            111661111                   \n" +
                "          1 111116111  111    1   141   \n" +
                "  11122  31122222122112227a3 46 44632111\n" +
                "11322232312a122123332a822221371443216111\n" +
                "882111287777411111111112246cf47f9a485ca8\n" +
                "-------***********--------*******-------\n" +
                "-------***------------------------------\n" +
                "--------**-***--------------------------\n" +
                "-----------*----------------------------\n" +
                "-----------*----------------------------\n" +
                "-----------*----------------------------\n" +
                "-----------*----------------------------\n" +
                "-----------*----------------------------\n" +
                "-----------*----------------------------\n" +
                "-----------**********-------------------\n" +
                "-----------*----------------------------\n" +
                "-----------*----------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 4-.jap\n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "                                        \n" +
                "      11   111   111112111 1  3         \n" +
                "     11211111112111111111111 31355      \n" +
                "   1111244421244421111111111314243 2    \n" +
                " 2122b11111111111111111111b1c1141252    \n" +
                "52242222222212222222222223322222222222  \n" +
                "1251111111111121111111211111111211328211\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "----------------------------------------\n" +
                "\n" +
                "\n" +
                ", 5.jap\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "--------------*--------------------\n" +
                "--------------*--------------------\n" +
                "--------------*--------------------\n" +
                "-------------**----------*---------\n" +
                "-------------**----------*---------\n" +
                "-------------**----**----**--------\n" +
                "-------------**----**----**--------\n" +
                "-------------**----**----**--------\n" +
                "-------------**----**----**--------\n" +
                "-------------**----*-----**--------\n" +
                "--------------*----*-----*---------\n" +
                "--------------*----*-----*---------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 6.jap\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "------------------------*----------\n" +
                "------------------------*----------\n" +
                "------------------------**---------\n" +
                "------------------------**---------\n" +
                "------------------------*----------\n" +
                "------------------------*----------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 7.jap\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "-----*--------------\n" +
                "-----*--------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "------**------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                ", 8.jap\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "-----------------------------------\n" +
                "\n" +
                "\n" +
                ", 9.jap\n" +
                "--------****--------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "-----------*--------\n" +
                "------------*-------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "--------------------\n" +
                "\n" +
                "\n" +
                "]", boards.toString());

    }

    private String process(Solver solver, File file) {
        solver.loadFile(true, file.getAbsolutePath(), 1);
        solver.clear(false); // чистим только поле
        solver.solve();
        return file.getName() + "\n" + solver.printAll() + "\n\n";
    }

    private void assertS(String map, String expected, String expected1) {
        // given
        Solver solver = new Solver();
        solver.tryAssumption = true;
        solver.load(new LevelImpl(map));
        solver.clear(false);
        assertEquals(expected, solver.printAll());

        // when
        solver.solve();

        // then
        assertEquals(expected1, solver.printAll());
    }

}